<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:os="http://www.mulesoft.org/schema/mule/os"
	xmlns:wsc="http://www.mulesoft.org/schema/mule/wsc" xmlns:vm="http://www.mulesoft.org/schema/mule/vm"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/wsc http://www.mulesoft.org/schema/mule/wsc/current/mule-wsc.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd">
	<configuration-properties doc:name="Configuration properties" doc:id="cc974e5f-fd2f-49b2-b7cf-bd5848bbf185" file="configuration.yaml" />
	<configuration doc:name="Configuration" doc:id="f510869b-e2bd-40fe-b7d8-310e0c4b284d" defaultErrorHandler-ref="globalError_Handler" />
	<wsc:config name="Web_Service_Consumer_Configuration" doc:name="Web Service Consumer Config" doc:id="484f03a4-5320-4cd0-9d6c-850ed7f3ea9c" >
		<wsc:connection wsdlLocation="${readCoin.wsdl}" service="${readCoin.service}" port="${readCoin.port}" address="${readCoin.address}" >
			<wsc:web-service-security actor="http://schemas.xmlsoap.org/soap/actor/next" />
		</wsc:connection>
	</wsc:config>
	<os:object-store name="Object_Store_Configuration" doc:name="Object Store_Configuration" doc:id="0c6c1500-8142-4f19-8f0c-34e9b58687e9" />
	<error-handler name="globalError_Handler" doc:id="9fcc8f7f-84c3-489a-b1e1-6c2dbf7e8bb6" >
			<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="b3445be9-d73f-4f6e-a12e-66394e9dea34" type="OS:STORE_NOT_AVAILABLE, OS:INVALID_KEY, OS:KEY_NOT_FOUND">
				<ee:transform doc:name="OBJECT_STORE ERROR" doc:id="bd6d794c-5137-4321-9ffa-f475cf9c1b35" >
					<ee:message >
						<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "statusCode": 400,
  "errorType": (error.errorType.namespace default"OS:STORE_NOT_AVAILABLE")++":"
    ++ (error.errorType.identifier default "OS:STORE_NOT_AVAILABLE, OS:INVALID_KEY, OS:KEY_NOT_FOUND"),
  "description": error.description,
  "date": now()
}]]></ee:set-payload>
					</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[400]]></ee:set-variable>
				</ee:variables>
				
</ee:transform>
			</on-error-propagate>
	</error-handler>
	
	<vm:config name="VM_Configuration" doc:name="VM Config" doc:id="73178ac0-fa85-42b9-84ce-cdf8adb42747" >
		<vm:queues >
			<vm:queue queueName="${vm.queueName}" />
		</vm:queues>
	</vm:config>
	

	
</mule>
